# SAE2-01 : Développement d’une application
## Auteurs : 
- Lyfoung Constantin (```lyfo0002```)
- Betry Eliott (```betr0003```)
## Mise en place du projet
- Initialisation de ```composer```
    > ```composer init```
- Ajout de ```php-cs-fixer```
    > ```composer require friendsofphp/php-cs-fixer --dev```
- Récupération de la base de données
    > ![bd](img/bd.jpg)
- création de ```.mypdo.ini```
    > ![ini](img/ini.jpg)
## Création des classes
### Création de la classe ```Category```
- Création de la branche categories
    > ```git branch categories```
> ![category](img/category1.jpg)
- Création de la merge request sur Gitlab
> ![merge](img/merge-request.jpg)

### Création des classe ```Genre,Game,Poster,	CategorieCollection,genreCollection,GameCollection```
``
 - Même procédé pour les classes mais utilisation de ```git rebase```
    > branche genre active :
    >```git checkout genre```
    >
    > rebase la branche sur main:
    >```git rebase main```
    
    
## Ajout des methodes

### Methode pour la classe catégorie

#### Récupération de l'ID de catégorie

![category2](img/CATEGORIE2.png)

- Récupère l'ID de la catégorie via la requête GET.

- Vérifie si l'ID existe et est bien un nombre.

- Lance une exception si l'ID est invalide (ParameterException).


#### Récupération de la catégorie

![category3](img/CATEGORIE3.png)

- Utilise Category::findById($categoryId) pour chercher la catégorie en base de données.

- Nettoie la description avec escapeString() pour éviter les injections XSS.

- Initialise une page web avec new AppWebPage("Jeux Vidéo : $nom").



#### Création du menu

![category4](img/CATEGORIE4.png)

Ajoute un menu contenant :

- Un lien vers l'accueil.

- Un lien pour ajouter un jeu.

- Un formulaire de tri permettant de classer les jeux par nom ou année de sortie.


#### Affichage des jeux

![category5](img/CATEGORIE5.png)

- Récupère la liste des jeux via GameCollection::findByCategoryId().

- Alterne l'affichage (gameBox et gameBox_rev) pour un effet visuel dynamique.

- Ajoute chaque jeu avec son nom, année de sortie et description courte.


#### Gestion des erreurs

![category6](img/CATEGORIE6.png)

Gère les erreurs courantes :

- 400 Bad Request → ID invalide.

- 404 Not Found → Catégorie ou jeu introuvable.

- 500 Internal Server Error → Erreur inattendue.


### Methode pour la classe game

#### Récupération et Validation de l'ID du Jeu

![game1](img/game1.png)
- Récupère l'ID du jeu envoyé via la requête GET.

- Convertit l'ID en entier avec intval().

- Valide si l'ID est bien défini et numérique.

- Lance une exception ParameterException si l'ID est invalide

#### Recherche du Jeu en Base de Données

![game2](img/game2.png)

- Cherche le jeu correspondant avec Game::findById().

- Évite les failles XSS en nettoyant le nom avec escapeString().

- Crée une page web personnalisée avec le nom du jeu.

#### Création du Menu

![game3](img/game3.png)

Affiche trois options :

- Retour à l'accueil.

- Modifier le jeu via game-form.php.

- Supprimer le jeu via game-delete.php.

#### Informations du Jeu

![game4](img/game4.png)

- Cherche le développeur associé au jeu.

- Convertit le prix (stocké en centimes) en euros.

#### Affichage des Systèmes d'Exploitation

![game5](img/game5.png)

- Vérifie si le jeu est compatible avec Windows, Linux ou Mac.

- Affiche des icônes correspondantes

#### Détails du Jeu

![game6](img/game6.png)

Affiche:

- Affiche du jeu (poster.php).

- Année de publication.

- Développeur.

- Systèmes compatibles.

#### Note Metacritic et Prix

![game7](img/game7.png)

- Affiche la note Metacritic.

- Affiche le prix du jeu.

#### Ajout des Genres et Catégories

![game8](img/game8.png)

- Ajoute les liens vers les genres et catégories du jeu

#### Gestion des Erreurs

![game9](img/game9.png)

Gère les erreurs courantes :

- 400 Bad Request → ID invalide.

- 404 Not Found → Catégorie ou jeu introuvable.

- 500 Internal Server Error → Erreur inattendue.

### Methode pour la classe Genre

#### Récupération et Validation de l'ID du Genre
![genre1](img/genre1.png)

- Récupère l'ID du genre via la requête GET.

- Vérifie si l'ID est défini et bien un nombre (is_numeric()).

- Lance une exception ParameterException si l'ID est invalide.

#### Recherche du Genre en Base de Données

![genre2](img/genre2.png)

- Cherche le genre en base de données via genre::findById().

- Nettoie la description pour éviter les injections XSS (escapeString()).

- Crée une page web avec le nom du genre.

#### Création du Menu

![genre3](img/genre3.png)
Ajoute un menu de navigation :

- Accueil.

- Ajout de jeu.

- Formulaire de tri des jeux par nom ou année de sortie

#### Affichage des Jeux du Genre

![genre4](img/genre4.png)
- Récupère tous les jeux associés au genre avec GameCollection::findByGenreId()

#### Alternance dans l'Affichage des Jeux

![genre5](img/genre5.png)
- Alterne l'affichage (gameBox et gameBox_rev) pour améliorer la mise en page.
Affiche :
- Image du jeu (poster.php).

- Nom et année de sortie.

- Description courte.


#### Gestion des Erreurs

![genre6](img/genre6.png)
- 400 → ID de genre invalide.

- 404 → Genre ou jeux non trouvés.

- 500 → Erreur serveur.

### Methode pour la classe poster

#### Récupération et Validation de l'ID du Poster

![poster1](img/poster1.png)

- Récupère l'ID du poster via la requête GET.

- Vérifie si l'ID est bien défini et numérique (is_numeric()).

- Lance une exception ParameterException si l'ID est invalide.

#### Recherche du Poster
![poster2](img/poster2.png)

- Cherche le poster en base de données avec poster::findById()

#### Configuration du Type de Réponse
![poster3](img/poster3.png)

- Définit le type de réponse HTTP en image/jpeg.

- Affiche l'image en récupérant son contenu avec getJpeg()


#### Gestion des Erreurs
![poster4](img/poster4.png)

- 400 → Mauvaise requête (ID invalide).

- 404 → Poster introuvable.

- 500 → Erreur serveur.

### Methode pour la classe index

#### Création de la Page HTML
![index1](img/index1.png)
Crée une page HTML avec un titre "Jeux Vidéo"
#### Ajout du Menu
![index2](img/index2.png)
- Affiche un menu avec un lien permettant d'ajouter un jeu.
#### Affichage des Genres
![index3](img/index3.png)
- Récupère tous les genres avec genreCollection::findAll().
- - Affiche chaque genre sous forme de lien pointant vers genre.php?genreId=<ID>.
#### Affichage des Catégories
![index4](img/index4.png)
- Récupère tous les genres avec genreCollection::findAll().

- Affiche chaque genre sous forme de lien pointant vers genre.php?genreId=<ID>.
#### Affichage Final
![index5](img/index5.png)
- Récupère toutes les catégories via CategoryCollection::findAll().

- Affiche chaque catégorie sous forme de lien pointant vers category.php?categoryId=<ID>.
